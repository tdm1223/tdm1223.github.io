---
title:  "프로세스"
excerpt: "프로세스의 상태, 프로세스 종류, PCB, 스케줄러"
categories:
  - OperatingSystem
tags:
  - OperatingSystem
  - process
  - pcb
  - scheduler
  - process state
last_modified_at: 2021-01-13T00:00:50-00:00
sitemap :
    changefreq : daily
    priority : 1.0
toc: true
---

## 프로세스
- 실행 중인 프로그램
- 프로그램 실행의 단위
- 프로세스는 프로그램 카운터(`PC`), 스택(`Stack`), 데이터 섹션을 포함한다.

## 프로세스 상태 (Process State)
![ProcessState](/img/ProcessState.jpg)
- new : 프로세스가 **생성**된 상태
- ready : 프로세스가 CPU에 할당받기 **대기** 중인 상태
- running : 프로세스가 **실행** 중인 상태
- waiting : 프로세스가 I/O Operation 등 특정 event 발생으로 **대기** 중인 상태
- terminated : 프로세스가 실행을 **마친** 상태

### waiting과 ready 상태의 차이점
- `waiting`은 `disk`, `I/O` 등으로 **절대 프로세스가 실행될 수 없는 상태**이다.
- `ready`는 `CPU`에 할당받기를 대기 중인 상태로, 프로세스가 수행될 수 있는 상태이다. 
- `waiting`상태에 들어간 프로세스는 특정 `event`가 종료되면, `running`이 아닌 `ready` 상태로 전환된다.

## Process Control Block (프로세스 제어 블록, PCB)
![PCB](/img/PCB.jpg)
- 구조체 변수로써 프로세스에 대한 **모든 정보**를 담고 있다. 

### 프로세스와 관련된 정보 
- 프로세스 상태 
- 프로그램 카운터 
- CPU 레지스터 
- CPU 예약 정보 
- 메모리 관리 정보 
- counting 정보 
- I / O 상태 정보

## 프로세스의 종류
### I/O-bound 프로세스
- 연산은 적지만 I/O 수행 시간이 많은 프로세스이다.
- 예로 워드프로세서가 있다. 
- **CPU 연산량이 적기 때문**에 일반적으로 스케줄러의 우선순위가 높다.

### CPU-bound 프로세스
- CPU 연산량이 많은 프로세스로이다.
- 예로 비디오가 있다. 

## Context Switch(문맥 교환)
![ContextSwitch](/img/ContextSwitch.jpg)
- CPU가 **다른 프로세스로 전환**하면 시스템은 **이전 프로세스의 상태를 저장**하고 새 프로세스의 **저장된 상태**를 불러온다. 
- 문맥 교환 시간은 **하드웨어**에 의존한다. 
- 문맥을 교환하는 동안에는 유용한 작업을 수행할 수 없기 때문에, 문맥 교환 시간은 **오버헤드**라고 할 수 있다.

## Process Scheduling Queue
### Job queue
- 시스템에서 **실행 중인 프로세스**들이 들어가는 큐
- 현재 메모리에 올라가 있는 모든 프로세스들이 들어간다. 

### Ready queue
- CPU에게 **할당받기를 대기하고 있는 프로세스**들이 들어가는 큐
- Ready 상태의 프로세스들이 Ready queue로 들어간다.
- 스케줄러는 Ready queue를 보고 가장 우선순위가 높은 작업을 선택한다.

### Device queue
- **I/O device를 기다리고 있는** 큐
- 여러 개의 프로세스가 I/O 요청을 보냈을 수도 있기 때문에 따로 큐가 존재한다.

## Scheduler
### Long-term Scheduler
- 어떤 프로세스가 **ready queue(메모리)로 할당**이 될지를 선택해 주는 스케줄러
- 요즘 컴퓨터들은 성능이 좋기 때문에 매우 드물게 일어나거나 아예 일어나지 않는다. 
- 메모리 내에서 현재 수행 중인 프로그램의 개수를 제어하며, 시스템의 안정성을 결정한다. 
- 프로세스가 많아지면 안정을 시켜준다. 

### Mid-term Scheduler
- **가상 메모리**와 **메인 메모리** 사이를 관리해주는 스케줄러
- 누구를 Swapping-in 하고 누구를 Swapping-out 할지 결정해주는 스케줄러

### Short-term Scheduler
- 10밀리 세컨드(`Timer interrupt`)마다 발동되어 **CPU에 할당될 프로세스**를 결정해 주는 스케줄러
- 매우 자주 발생한다.

## 프로세스 생성(Process Creation)
- **부모 프로세스**는 **자식 프로세스**를 생성한다. 
- 기존의 프로세스가 새로운 프로세스를 생성을 한다. 
- 프로세스들의 구조는 **트리** 형태로 나타난다. 
- 자식 프로세스는 부모 프로세스의 자원을 공유한다. 
- 자식과 부모 프로세스는 별도의 프로세스로써 실행된다.
- 부모 프로세스는 자식 프로세스가 종료될 때까지 기다린다. 
- 자식 프로세스는 부모 프로세스의 주소 공간을 복제한다.
- 자식 프로세스는 새로운 프로그램을 받아온다.

## 프로세스 종료(Process Termination)
- 프로세스는 마지막 명령문을 실행하고 운영체제에 명령문을 삭제하도록 요청한다. (exit)
- 자식에서 부모로 데이터를 출력한다. (wait)
- 프로세스의 자원이 운영체제에 의해 할당 해제된다.
- 부모 프로세스는 자식 프로세스의 실행을 종료할 수 있다. (abort)
- 시스템 호출(exit)을 사용하여 운영체제에게 자신의 삭제를 요청하면 종료한다.
- 프로세스는 자신의 부모 프로세스에게 상태 값을 반환할 수 있다.
- 프로세스의 모든 자원이 운영체제로 반납된다.

## 프로세스 간 통신
- **독립 프로세스**는 다른 프로세스의 실행에 영향을 미치거나 영향을 받을 수 없다. 
- **협력 프로세스**는 다른 프로세스의 실행에 영향을 주거나 영향을 받을 수 있다.

### 프로세스 협력의 이점
1. 정보 공유 
2. 계산속도 향상 
3. 모듈성 
4. 편리함